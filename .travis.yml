language: python
python:
  - "3.8"

install:
  - python -m pip install -U pip
  - python setup.py install

services:
  - postgresql

before_script:
  - psql -c "CREATE DATABASE test;" -U postgres

script:
  - pylint --disable=no-self-use,too-few-public-methods,no-member,broad-except,too-many-public-methods --max-line-length=120 department_app/
  - coverage run setup.py test

after-success:
  - coveralls

deploy:
  provider: heroku
  api_key:
    secure: Mi8WPj2FMrMvyeEpS2rLzBMNW3yzIYvTcoFqtzK92EMTiY7VsXfjVtpaRUuxzXXY5ErLAS1ETYbzHLPWDXNAr/6VJXJLki3/f5Ut4sZmG15ORVA757vRqmKWq0vwNstdgocpbinWmg1kvfLyjsc9xhWyaCo9oRNltRqlbZD2lsxFV365vbEIbtfMMy0mNu1oCu6JkGYiWXKqjXO/rPozCLoIkYdLdd/8Gq/+Z+bBvAu+9nQ3XBUJD6dVy109ztVaOEV7u3hbmB8J/422lMtyjB97cs835cNf5JZt2sYaxeAX55Pz2UuSrwK9uyXfdmiUzis8dbiDQp8OrTqQ72l6kz02YD6WJ/wfF2sFlgvAG1rQpfkvrqCPFRrVhk+J0vXB4Z8v7gx4Bof/qFoxe1c3LFj6WedTInwGJ4NyTiuLftkocmgXAz7Mrf8QvL5YaS7TZGLOb6raDC9nkBTMM/hWXSV7veZ7l9ucHfdGogTVrJFjhSf8EM0S1UhZg1K37sNyuza7+YIVYZFBHWJ2l/efiUmIEEGmgOXdHRafDiR21p88kgwPxgAl2LBiOq7bgiRVOzG1yebaMv8RE8dwEV1ikgs+GilMnvYkEkgoiFzXrKdSx/DohJcIHmdExKMp2Wg/wFTahqKVNvpMEuXUSVJx4Wq0d783jcKwmP3mFuJRzhkw=

notifications:
  - email:
      recipients:
        - ljte823@gmail.com
      on_success: never
      on_failure: always
