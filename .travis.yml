language: python
python:
  - "3.8"

install:
  - python -m pip install -U pip
  - python setup.py install

services:
  - postgresql

before_script:
  - psql -c "CREATE DATABASE test;" -U postgres
  - python run.py &

script:
  - pylint --disable=no-self-use,too-few-public-methods,no-member,broad-except --max-line-length=120 department_app/
  - coverage run setup.py test

after-success:
  - coveralls

notifications:
  - email:
      recipients:
        - ljte823@gmail.com
      on_success: never
      on_failure: always
